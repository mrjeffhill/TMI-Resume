{"ast":null,"code":"import _classCallCheck from\"/Users/jeff/Documents/React Sandbox/resume-resume/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jeff/Documents/React Sandbox/resume-resume/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/jeff/Documents/React Sandbox/resume-resume/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/jeff/Documents/React Sandbox/resume-resume/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/jeff/Documents/React Sandbox/resume-resume/node_modules/@babel/runtime/helpers/esm/inherits\";import*as React from\"react\";import ReactDOM from\"react-dom\";import{AppData}from\"./appdata\";import helpers from\"./helpers\";//import mapHelpers from \"./mapHelpers\";\nvar google=window.google;var BobsMyUncle=[{featureType:\"all\",elementType:\"all\",stylers:[{visibility:\"off\"}]},{featureType:\"administrative.country\",elementType:\"all\",stylers:[{visibility:\"on\"}]},{featureType:\"administrative.country\",elementType:\"labels.text.fill\",stylers:[{color:\"#ff0000\"}]},{featureType:\"administrative.country\",elementType:\"labels.text.stroke\",stylers:[{color:\"#3a3535\"}]},{featureType:\"administrative.province\",elementType:\"all\",stylers:[{visibility:\"on\"}]},{featureType:\"administrative.province\",elementType:\"labels.text.fill\",stylers:[{color:\"#ff0000\"}]},{featureType:\"administrative.province\",elementType:\"labels.text.stroke\",stylers:[{color:\"#3a3535\"}]},{featureType:\"administrative.locality\",elementType:\"all\",stylers:[{visibility:\"off\"}]},{featureType:\"administrative.locality\",elementType:\"labels.text.fill\",stylers:[{color:\"#ffffff\"}]},{featureType:\"administrative.locality\",elementType:\"labels.text.stroke\",stylers:[{color:\"#756151\"},{lightness:\"15\"},{saturation:\"2\"},{gamma:\"3.67\"}]},{featureType:\"road.highway\",elementType:\"all\",stylers:[{visibility:\"simplified\"}]},{featureType:\"road.highway\",elementType:\"geometry.fill\",stylers:[{visibility:\"simplified\"},{color:\"#f0af54\"}]},{featureType:\"road.highway\",elementType:\"labels.text\",stylers:[{visibility:\"off\"}]},{featureType:\"road.highway\",elementType:\"labels.icon\",stylers:[{visibility:\"off\"}]},{featureType:\"road.highway.controlled_access\",elementType:\"all\",stylers:[{visibility:\"simplified\"}]},{featureType:\"road.highway.controlled_access\",elementType:\"geometry.fill\",stylers:[{visibility:\"simplified\"},{color:\"#f0af54\"}]},{featureType:\"road.highway.controlled_access\",elementType:\"labels.text\",stylers:[{visibility:\"off\"}]},{featureType:\"road.highway.controlled_access\",elementType:\"labels.icon\",stylers:[{visibility:\"off\"}]},{featureType:\"road.arterial\",elementType:\"all\",stylers:[{visibility:\"simplified\"}]},{featureType:\"road.arterial\",elementType:\"geometry.fill\",stylers:[{visibility:\"simplified\"},{color:\"#d2c1a5\"}]},{featureType:\"road.arterial\",elementType:\"labels\",stylers:[{visibility:\"off\"}]},{featureType:\"road.local\",elementType:\"all\",stylers:[{visibility:\"simplified\"}]},{featureType:\"road.local\",elementType:\"geometry.fill\",stylers:[{color:\"#c4a983\"},{visibility:\"simplified\"}]},{featureType:\"road.local\",elementType:\"labels\",stylers:[{visibility:\"off\"}]},{featureType:\"water\",elementType:\"all\",stylers:[{visibility:\"off\"}]},{featureType:\"water\",elementType:\"geometry\",stylers:[{visibility:\"off\"}]},{featureType:\"water\",elementType:\"geometry.fill\",stylers:[{visibility:\"off\"},{color:\"#e3ce9f\"}]},{featureType:\"water\",elementType:\"geometry.stroke\",stylers:[{visibility:\"simplified\"}]},{featureType:\"water\",elementType:\"labels\",stylers:[{visibility:\"off\"}]}];var Commute=/*#__PURE__*/function(_React$Component){_inherits(Commute,_React$Component);var _super=_createSuper(Commute);// ***** access via this.context\nfunction Commute(props){var _this;_classCallCheck(this,Commute);_this=_super.call(this,props);_this.state={mapIsReady:false,myLoc:{},googleMap:{},jeffMarker:{},jeffInfo:{},commuteStatusMsg:\"\",preCalc:true,isCalculating:false};_this.getCommute=_this.getCommute.bind(_assertThisInitialized(_this));return _this;}_createClass(Commute,[{key:\"componentWillMount\",value:function componentWillMount(){window.onload=this.setState({mapIsReady:true,myLoc:this.context.myLatLng});}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.state.mapIsReady){// Display the map\nthis.map=new google.maps.Map(document.getElementById(\"Commute\"),{center:this.state.myLoc,zoom:14,disableDefaultUI:true,backgroundColor:\"hsla(0, 0%, 0%, 0)\",styles:BobsMyUncle});var map=this.map;var contentString='<div class=\"info-window\"><h4>Me</h4></div>';this.infowindow=new google.maps.InfoWindow({content:contentString});var infowindow=this.infowindow;this.marker=new google.maps.Marker({position:this.state.myLoc,map:map,title:\"Me\",animation:google.maps.Animation.DROP,icon:{url:\"https://icons.iconarchive.com/icons/icons-land/vista-map-markers/128/Map-Marker-Push-Pin-2-Right-Chartreuse-icon.png\",scaledSize:new google.maps.Size(64,64)}});var marker=this.marker;google.maps.event.addListener(marker,\"click\",function(){infowindow.open(map,this);});this.setState({googleMap:map,jeffMarker:marker,jeffInfo:infowindow});}}},{key:\"componentWillUpdate\",value:function componentWillUpdate(nextProps,nextState){}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){}},{key:\"getCommute\",value:function getCommute(event){var _this2=this;//console.log(\"Get Commute\");\nthis.setState({commuteStatusMsg:\"One moment, while some math happens...\",preCalc:false,isCalculating:true});/*\n      I'm aware that this is a complete mess.\n    */var myLoc=this.state.myLoc;var mapObject=this.map;var commuteResult=function commuteResult(status,preCalc,msg){_this2.setState({commuteStatusMsg:msg,preCalc:preCalc,isCalculating:status});};// Try HTML5 geolocation.\nif(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var pos={lat:position.coords.latitude,lng:position.coords.longitude};var service=new google.maps.DistanceMatrixService();service.getDistanceMatrix({origins:[pos],destinations:[myLoc],travelMode:\"DRIVING\",unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:false,avoidTolls:false},function(response,status){if(status!==\"OK\"){// BOO\nalert(\"Error was: \"+status);}else{// YAY\n//console.log(\"get distance response\" + response);\nvar origin=response.originAddresses[0];var destination=response.destinationAddresses[0];// {text: \"308 ft\", value: 94}\nvar distance=response.rows[0].elements[0].distance;// {text: \"1 min\", value: 40}\nvar time=response.rows[0].elements[0].duration;var miles=helpers.getMiles(distance.value);//console.log(originList);\nvar destContentString='<div class=\"info-window\"><h4>You</h4></div>';var destInfowindow=new google.maps.InfoWindow({content:destContentString});var destMarker=new google.maps.Marker({position:pos,map:mapObject,title:\"You\",animation:google.maps.Animation.DROP,icon:{url:\"https://icons.iconarchive.com/icons/icons-land/vista-map-markers/256/Map-Marker-Push-Pin-2-Left-Azure-icon.png\",scaledSize:new google.maps.Size(64,64)}});google.maps.event.addListener(destMarker,\"click\",function(){destInfowindow.open(mapObject,this);});var _output=\"Your current location <strong>( \"+origin+\" )</strong> is about \"+miles+\" miles away. <br />Google thinks it would take me about <strong>\"+time.text+\"</strong> to get there. I'm pretty sure I could do it in less!\";commuteResult(false,false,_output);var directionsService=new google.maps.DirectionsService();var directionsRequest={origin:origin,destination:destination,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC};directionsService.route(directionsRequest,function(response,status){if(status==google.maps.DirectionsStatus.OK){new google.maps.DirectionsRenderer({map:mapObject,directions:response,suppressMarkers:true,polylineOptions:{strokeColor:\"#232020\",strokeOpacity:\".7\",strokeWeight:\"6\"}});//mapObject.setCenter(mapObject.bounds.getCenter()); //.fitBounds(map.getBounds(), 50);\nmapObject.fitBounds(mapObject.getBounds(),50);}else{//$(\"#error\").append(\"Unable to retrieve your route<br />\");\nvar output=\"Google says no. Try again?\";commuteResult(false,true,output);console.log(\"directions response: \"+response);}});}});},function(){//handleLocationError(true, infoWindow, map.getCenter());\nvar output=\"Well that's awkward. Try again?\";commuteResult(false,true,output);});}else{// Browser doesn't support Geolocation\nvar output=\"Your browser does not support Geolocation. Sad!\";commuteResult(false,false,output);}}},{key:\"render\",value:function render(){var _this3=this;//console.log(this.context.introVisible);\nvar context=this.context;var mapActiveClass=context.mapVisible?\"res-map full-view active\":\"res-map full-view\";var calculateClass=this.state.isCalculating?\"thinking\":\"\";var buttonClass=this.state.preCalc?\"\":\"visually-hidden\";return/*#__PURE__*/React.createElement(\"div\",{id:\"Map\",className:mapActiveClass},/*#__PURE__*/React.createElement(\"div\",{id:\"Commute\",style:{width:\"100%\",height:\"100%\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"res-map-info\"},/*#__PURE__*/React.createElement(\"p\",{className:buttonClass},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){_this3.getCommute(e);}},\"Get Commute\")),/*#__PURE__*/React.createElement(\"p\",{className:calculateClass,dangerouslySetInnerHTML:{__html:this.state.commuteStatusMsg}})));}}]);return Commute;}(React.Component);Commute.contextType=AppData;export default Commute;","map":{"version":3,"sources":["/Users/jeff/Documents/React Sandbox/resume-resume/src/components/map.js"],"names":["React","ReactDOM","AppData","helpers","google","window","BobsMyUncle","featureType","elementType","stylers","visibility","color","lightness","saturation","gamma","Commute","props","state","mapIsReady","myLoc","googleMap","jeffMarker","jeffInfo","commuteStatusMsg","preCalc","isCalculating","getCommute","bind","onload","setState","context","myLatLng","map","maps","Map","document","getElementById","center","zoom","disableDefaultUI","backgroundColor","styles","contentString","infowindow","InfoWindow","content","marker","Marker","position","title","animation","Animation","DROP","icon","url","scaledSize","Size","event","addListener","open","nextProps","nextState","prevProps","prevState","mapObject","commuteResult","status","msg","navigator","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","service","DistanceMatrixService","getDistanceMatrix","origins","destinations","travelMode","unitSystem","UnitSystem","IMPERIAL","avoidHighways","avoidTolls","response","alert","origin","originAddresses","destination","destinationAddresses","distance","rows","elements","time","duration","miles","getMiles","value","destContentString","destInfowindow","destMarker","output","text","directionsService","DirectionsService","directionsRequest","DirectionsTravelMode","DRIVING","METRIC","route","DirectionsStatus","OK","DirectionsRenderer","directions","suppressMarkers","polylineOptions","strokeColor","strokeOpacity","strokeWeight","fitBounds","getBounds","console","log","mapActiveClass","mapVisible","calculateClass","buttonClass","width","height","e","__html","Component","contextType"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { AppData } from \"./appdata\";\nimport helpers from \"./helpers\";\n//import mapHelpers from \"./mapHelpers\";\n\nconst google = window.google;\nconst BobsMyUncle = [\n  {\n    featureType: \"all\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"administrative.country\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"on\" }]\n  },\n  {\n    featureType: \"administrative.country\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#ff0000\" }]\n  },\n  {\n    featureType: \"administrative.country\",\n    elementType: \"labels.text.stroke\",\n    stylers: [{ color: \"#3a3535\" }]\n  },\n  {\n    featureType: \"administrative.province\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"on\" }]\n  },\n  {\n    featureType: \"administrative.province\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#ff0000\" }]\n  },\n  {\n    featureType: \"administrative.province\",\n    elementType: \"labels.text.stroke\",\n    stylers: [{ color: \"#3a3535\" }]\n  },\n  {\n    featureType: \"administrative.locality\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"administrative.locality\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#ffffff\" }]\n  },\n  {\n    featureType: \"administrative.locality\",\n    elementType: \"labels.text.stroke\",\n    stylers: [\n      { color: \"#756151\" },\n      { lightness: \"15\" },\n      { saturation: \"2\" },\n      { gamma: \"3.67\" }\n    ]\n  },\n  {\n    featureType: \"road.highway\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"simplified\" }]\n  },\n  {\n    featureType: \"road.highway\",\n    elementType: \"geometry.fill\",\n    stylers: [{ visibility: \"simplified\" }, { color: \"#f0af54\" }]\n  },\n  {\n    featureType: \"road.highway\",\n    elementType: \"labels.text\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"road.highway\",\n    elementType: \"labels.icon\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"road.highway.controlled_access\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"simplified\" }]\n  },\n  {\n    featureType: \"road.highway.controlled_access\",\n    elementType: \"geometry.fill\",\n    stylers: [{ visibility: \"simplified\" }, { color: \"#f0af54\" }]\n  },\n  {\n    featureType: \"road.highway.controlled_access\",\n    elementType: \"labels.text\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"road.highway.controlled_access\",\n    elementType: \"labels.icon\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"road.arterial\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"simplified\" }]\n  },\n  {\n    featureType: \"road.arterial\",\n    elementType: \"geometry.fill\",\n    stylers: [{ visibility: \"simplified\" }, { color: \"#d2c1a5\" }]\n  },\n  {\n    featureType: \"road.arterial\",\n    elementType: \"labels\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"road.local\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"simplified\" }]\n  },\n  {\n    featureType: \"road.local\",\n    elementType: \"geometry.fill\",\n    stylers: [{ color: \"#c4a983\" }, { visibility: \"simplified\" }]\n  },\n  {\n    featureType: \"road.local\",\n    elementType: \"labels\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"water\",\n    elementType: \"all\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"water\",\n    elementType: \"geometry\",\n    stylers: [{ visibility: \"off\" }]\n  },\n  {\n    featureType: \"water\",\n    elementType: \"geometry.fill\",\n    stylers: [{ visibility: \"off\" }, { color: \"#e3ce9f\" }]\n  },\n  {\n    featureType: \"water\",\n    elementType: \"geometry.stroke\",\n    stylers: [{ visibility: \"simplified\" }]\n  },\n  {\n    featureType: \"water\",\n    elementType: \"labels\",\n    stylers: [{ visibility: \"off\" }]\n  }\n];\n\nclass Commute extends React.Component {\n  static contextType = AppData; // ***** access via this.context\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      mapIsReady: false,\n      myLoc: {},\n      googleMap: {},\n      jeffMarker: {},\n      jeffInfo: {},\n      commuteStatusMsg: \"\",\n      preCalc: true,\n      isCalculating: false\n    };\n    this.getCommute = this.getCommute.bind(this);\n  }\n  componentWillMount() {\n    window.onload = this.setState({\n      mapIsReady: true,\n      myLoc: this.context.myLatLng\n    });\n  }\n  componentDidMount() {\n    if (this.state.mapIsReady) {\n      // Display the map\n      this.map = new google.maps.Map(document.getElementById(\"Commute\"), {\n        center: this.state.myLoc,\n        zoom: 14,\n        disableDefaultUI: true,\n        backgroundColor: \"hsla(0, 0%, 0%, 0)\",\n        styles: BobsMyUncle\n      });\n      var map = this.map;\n\n      var contentString = '<div class=\"info-window\"><h4>Me</h4></div>';\n      this.infowindow = new google.maps.InfoWindow({\n        content: contentString\n      });\n      var infowindow = this.infowindow;\n      this.marker = new google.maps.Marker({\n        position: this.state.myLoc,\n        map: map,\n        title: \"Me\",\n        animation: google.maps.Animation.DROP,\n        icon: {\n          url:\n            \"https://icons.iconarchive.com/icons/icons-land/vista-map-markers/128/Map-Marker-Push-Pin-2-Right-Chartreuse-icon.png\",\n          scaledSize: new google.maps.Size(64, 64)\n        }\n      });\n      var marker = this.marker;\n      google.maps.event.addListener(marker, \"click\", function() {\n        infowindow.open(map, this);\n      });\n\n      this.setState({\n        googleMap: map,\n        jeffMarker: marker,\n        jeffInfo: infowindow\n      });\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState) {}\n  componentDidUpdate(prevProps, prevState) {}\n\n  getCommute(event) {\n    //console.log(\"Get Commute\");\n\n    this.setState({\n      commuteStatusMsg: \"One moment, while some math happens...\",\n      preCalc: false,\n      isCalculating: true\n    });\n\n    /*\n      I'm aware that this is a complete mess.\n    */\n    var myLoc = this.state.myLoc;\n    var mapObject = this.map;\n    var commuteResult = (status, preCalc, msg) => {\n      this.setState({\n        commuteStatusMsg: msg,\n        preCalc: preCalc,\n        isCalculating: status\n      });\n    };\n\n    // Try HTML5 geolocation.\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        function(position) {\n          var pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          };\n\n          var service = new google.maps.DistanceMatrixService();\n          service.getDistanceMatrix(\n            {\n              origins: [pos],\n              destinations: [myLoc],\n              travelMode: \"DRIVING\",\n              unitSystem: google.maps.UnitSystem.IMPERIAL,\n              avoidHighways: false,\n              avoidTolls: false\n            },\n            function(response, status) {\n              if (status !== \"OK\") {\n                // BOO\n                alert(\"Error was: \" + status);\n              } else {\n                // YAY\n\n                //console.log(\"get distance response\" + response);\n\n                var origin = response.originAddresses[0];\n                var destination = response.destinationAddresses[0];\n                // {text: \"308 ft\", value: 94}\n                var distance = response.rows[0].elements[0].distance;\n                // {text: \"1 min\", value: 40}\n                var time = response.rows[0].elements[0].duration;\n                var miles = helpers.getMiles(distance.value);\n                //console.log(originList);\n\n                var destContentString =\n                  '<div class=\"info-window\"><h4>You</h4></div>';\n                var destInfowindow = new google.maps.InfoWindow({\n                  content: destContentString\n                });\n                var destMarker = new google.maps.Marker({\n                  position: pos,\n                  map: mapObject,\n                  title: \"You\",\n                  animation: google.maps.Animation.DROP,\n                  icon: {\n                    url:\n                      \"https://icons.iconarchive.com/icons/icons-land/vista-map-markers/256/Map-Marker-Push-Pin-2-Left-Azure-icon.png\",\n                    scaledSize: new google.maps.Size(64, 64)\n                  }\n                });\n                google.maps.event.addListener(destMarker, \"click\", function() {\n                  destInfowindow.open(mapObject, this);\n                });\n\n                let output =\n                  \"Your current location <strong>( \" +\n                  origin +\n                  \" )</strong> is about \" +\n                  miles +\n                  \" miles away. <br />Google thinks it would take me about <strong>\" +\n                  time.text +\n                  \"</strong> to get there. I'm pretty sure I could do it in less!\";\n\n                commuteResult(false, false, output);\n\n                var directionsService = new google.maps.DirectionsService();\n                var directionsRequest = {\n                  origin: origin,\n                  destination: destination,\n                  travelMode: google.maps.DirectionsTravelMode.DRIVING,\n                  unitSystem: google.maps.UnitSystem.METRIC\n                };\n\n                directionsService.route(directionsRequest, function(\n                  response,\n                  status\n                ) {\n                  if (status == google.maps.DirectionsStatus.OK) {\n                    new google.maps.DirectionsRenderer({\n                      map: mapObject,\n                      directions: response,\n                      suppressMarkers: true,\n                      polylineOptions: {\n                        strokeColor: \"#232020\",\n                        strokeOpacity: \".7\",\n                        strokeWeight: \"6\"\n                      }\n                    });\n                    //mapObject.setCenter(mapObject.bounds.getCenter()); //.fitBounds(map.getBounds(), 50);\n                    mapObject.fitBounds(mapObject.getBounds(), 50);\n                  } else {\n                    //$(\"#error\").append(\"Unable to retrieve your route<br />\");\n                    var output = \"Google says no. Try again?\";\n                    commuteResult(false, true, output);\n                    console.log(\"directions response: \" + response);\n                  }\n                });\n              }\n            }\n          );\n        },\n        function() {\n          //handleLocationError(true, infoWindow, map.getCenter());\n          var output = \"Well that's awkward. Try again?\";\n          commuteResult(false, true, output);\n        }\n      );\n    } else {\n      // Browser doesn't support Geolocation\n      var output = \"Your browser does not support Geolocation. Sad!\";\n      commuteResult(false, false, output);\n    }\n  }\n\n  render() {\n    //console.log(this.context.introVisible);\n    const context = this.context;\n\n    const mapActiveClass = context.mapVisible\n      ? \"res-map full-view active\"\n      : \"res-map full-view\";\n    const calculateClass = this.state.isCalculating ? \"thinking\" : \"\";\n    const buttonClass = this.state.preCalc ? \"\" : \"visually-hidden\";\n\n    return (\n      <div id=\"Map\" className={mapActiveClass}>\n        <div id=\"Commute\" style={{ width: \"100%\", height: \"100%\" }}></div>\n        <div className=\"res-map-info\">\n          <p className={buttonClass}>\n            <button\n              onClick={e => {\n                this.getCommute(e);\n              }}\n            >\n              Get Commute\n            </button>\n          </p>\n          <p\n            className={calculateClass}\n            dangerouslySetInnerHTML={{ __html: this.state.commuteStatusMsg }}\n          ></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Commute;\n"]},"metadata":{},"sourceType":"module"}